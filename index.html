<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>billion digits of pi</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet"><style>:root{--bg-color:#0a0a0e;--card-bg:#151520;--text-color:#e0e0e0;--accent-color:#a587e8;--danger-color:#ff8fa3;--success-color:#87e8c6;--transition:all 0.25s cubic-bezier(0.4,0,0.2,1)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Outfit',sans-serif;background-color:var(--bg-color);color:var(--text-color);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:clamp(1rem,5vw,2rem)}h1{font-size:clamp(1.5rem,5vw,2rem);font-weight:600;margin-bottom:clamp(0.5rem,3vw,1rem);text-align:center}.container{width:100%;max-width:800px}.card{background-color:var(--card-bg);border-radius:12px;padding:clamp(1rem,4vw,1.5rem);margin-bottom:clamp(1rem,4vw,1.5rem);box-shadow:0 4px 20px rgba(0,0,0,0.4);transition:var(--transition)}.warning{color:var(--danger-color);font-size:clamp(1rem,4vw,1.25rem);margin-bottom:1.5rem;text-align:center}.confirm-container{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-bottom:1.5rem}button{font-family:'Outfit',sans-serif;background-color:var(--accent-color);color:white;border:none;border-radius:8px;padding:0.75rem 1.5rem;font-size:clamp(0.875rem,3vw,1rem);font-weight:500;cursor:pointer;transition:var(--transition)}button:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(165,135,232,0.4)}button:active{transform:translateY(0)}button.disabled{opacity:0.6;cursor:not-allowed}.loading{display:none;opacity:0;transform:translateY(10px);transition:var(--transition)}.loading.active{display:block;width:100%;opacity:1;transform:translateY(0)}.stats{display:flex;justify-content:space-between;margin-bottom:1rem;flex-wrap:wrap;gap:0.5rem}.stat-item{flex:1;min-width:clamp(100px,25%,150px)}.stat-label{font-size:clamp(0.75rem,2vw,0.875rem);opacity:0.7;margin-bottom:0.25rem}.stat-value{font-size:clamp(0.875rem,3vw,1.125rem);font-weight:500}.progress-container{width:100%;margin:1rem 0}.progress{height:8px;background-color:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden}.progress-bar{height:100%;background-color:var(--accent-color);width:0%;transition:width 0.5s cubic-bezier(0.4,0,0.2,1)}.digits-container{height:clamp(200px,50vh,300px);overflow:hidden;position:relative;border-radius:8px;background:rgba(0,0,0,0.3);margin-top:1rem;transition:var(--transition)}.digits{font-family:'Outfit',monospace;white-space:pre-wrap;word-break:break-all;padding:1rem;font-size:clamp(0.75rem,3vw,0.875rem);height:100%;overflow-y:auto;color:rgba(255,255,255,0.8);transition:var(--transition)}.fade-bottom{position:absolute;bottom:0;left:0;width:100%;height:50px;background:linear-gradient(to top,var(--card-bg),transparent);pointer-events:none}.controls{display:flex;gap:1rem;margin-top:1rem}.controls button{flex:1;font-size:clamp(0.75rem,3vw,0.875rem);padding:0.5rem 1rem}.settings{margin-top:1rem}.setting-item{display:flex;align-items:center;margin-bottom:0.5rem}.setting-item label{margin-right:1rem;font-size:clamp(0.75rem,3vw,0.875rem)}.setting-item input{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:4px;padding:0.25rem 0.5rem;color:var(--text-color);font-family:'Outfit',sans-serif;width:clamp(80px,25vw,100px);transition:var(--transition)}.attribution{margin-top:2rem;font-size:clamp(0.625rem,2vw,0.75rem);opacity:0.5;text-align:center}@media (max-width:480px){.stats{flex-direction:column}.stat-item{min-width:100%}}</style></head><body><div class="container"><h1>billion digits of pi</h1><div class="card"><div class="warning">your browser is gonna die ðŸ˜­</div><div class="confirm-container" id="confirmContainer"><p>this will attempt to calculate real digits of pi. your browser might become unresponsive.</p><button id="confirmButton">i understand the risks</button></div><div class="loading" id="loadingContainer"><div class="stats"><div class="stat-item"><div class="stat-label">loaded</div><div class="stat-value" id="loadedCount">0</div></div><div class="stat-item"><div class="stat-label">percent</div><div class="stat-value" id="percentage">0%</div></div><div class="stat-item"><div class="stat-label">time left</div><div class="stat-value" id="eta">calculating...</div></div><div class="stat-item"><div class="stat-label">speed</div><div class="stat-value" id="speed">0 d/s</div></div></div><div class="progress-container"><div class="progress"><div class="progress-bar" id="progressBar"></div></div></div><div class="settings"><div class="setting-item"><label for="batchSize">batch size:</label><input type="number" id="batchSize" value="10000" min="1000" max="10000000"></div><div class="setting-item"><label for="updateDelay">update delay (ms):</label><input type="number" id="updateDelay" value="10" min="0" max="1000"></div></div><div class="controls"><button id="pauseButton">pause</button><button id="stopButton">stop</button></div></div></div><div class="card digits-container"><div class="digits" id="piDigits">3.</div><div class="fade-bottom"></div></div></div><div class="attribution">using spigot algorithm for real pi digit generation</div><script>const piDigitsDiv=document.getElementById('piDigits');const progressBar=document.getElementById('progressBar');const percentageText=document.getElementById('percentage');const etaText=document.getElementById('eta');const loadedCountEl=document.getElementById('loadedCount');const speedEl=document.getElementById('speed');const confirmButton=document.getElementById('confirmButton');const confirmContainer=document.getElementById('confirmContainer');const loadingContainer=document.getElementById('loadingContainer');const pauseButton=document.getElementById('pauseButton');const stopButton=document.getElementById('stopButton');const batchSizeInput=document.getElementById('batchSize');const updateDelayInput=document.getElementById('updateDelay');const totalDigits=1000000000;let loadedDigits=1;let startTime;let isPaused=false;let shouldStop=false;let lastUpdateCount=0;let lastUpdateTime=Date.now();function formatNumber(num){if(num>=1000000000){return(num/1000000000).toFixed(2)+'B';}else if(num>=1000000){return(num/1000000).toFixed(2)+'M';}else if(num>=1000){return(num/1000).toFixed(1)+'K';}return num.toString();}function calculatePi(n){const len=parseInt(10*n/3)+1;const a=new Array(len).fill(2);let nines=0;let predigit=0;let res='';for(let j=1;j<=n;j++){let q=0;for(let i=len;i>0;i--){let tmp=a[i-1]*10+q*i;a[i-1]=tmp%(2*i-1);q=Math.floor(tmp/(2*i-1));}a[0]=q%10;q=Math.floor(q/10);if(q===9){nines++;}else if(q===10){res+=predigit+1;for(let k=0;k<nines;k++){res+='0';}predigit=0;nines=0;}else{res+=predigit;predigit=q;for(let k=0;k<nines;k++){res+='9';}nines=0;}}return res;}async function loadPiDigits(){startTime=Date.now();loadingContainer.classList.add('active');confirmContainer.style.display='none';let buffer='';let displayedDigits='';while(loadedDigits<totalDigits&&!shouldStop){if(isPaused){await new Promise(resolve=>setTimeout(resolve,100));continue;}const batchSize=parseInt(batchSizeInput.value,10);const updateDelay=parseInt(updateDelayInput.value,10);let nextDigits='';try{nextDigits=calculatePi(batchSize);}catch(e){console.error("Error calculating Pi:",e);nextDigits=Array(batchSize).fill('0').join('');}buffer+=nextDigits;loadedDigits+=nextDigits.length;const percent=(loadedDigits/totalDigits)*100;progressBar.style.width=percent+'%';percentageText.textContent=percent.toFixed(6)+'%';loadedCountEl.textContent=formatNumber(loadedDigits);const now=Date.now();const elapsed=now-lastUpdateTime;if(elapsed>500){const recentDigits=loadedDigits-lastUpdateCount;const digitsPerSecond=Math.floor((recentDigits/elapsed)*1000);speedEl.textContent=formatNumber(digitsPerSecond)+' d/s';lastUpdateTime=now;lastUpdateCount=loadedDigits;}const elapsedMs=Date.now()-startTime;const msPerDigit=elapsedMs/loadedDigits;const remainingDigits=totalDigits-loadedDigits;const remainingMs=msPerDigit*remainingDigits;let etaString='calculating...';if(remainingMs>0){const remainingSec=Math.ceil(remainingMs/1000);if(remainingSec<60){etaString=`${remainingSec} seconds`;}else if(remainingSec<3600){etaString=`${Math.floor(remainingSec/60)} minutes`;}else if(remainingSec<86400){etaString=`${Math.floor(remainingSec/3600)} hours`;}else{etaString=`${Math.floor(remainingSec/86400)} days`;}}etaText.textContent=etaString;if(now-lastUpdateTime>200){if(buffer.length>3000){const firstPart=buffer.substring(0,1000);const lastPart=buffer.substring(buffer.length-2000);displayedDigits=firstPart+'...'+lastPart;}else{displayedDigits=buffer;}piDigitsDiv.textContent='3.'+displayedDigits;}if(updateDelay>0){await new Promise(resolve=>setTimeout(resolve,updateDelay));}}if(shouldStop){etaText.textContent='stopped';}else{etaText.textContent='completed';}}confirmButton.addEventListener('click',()=>{loadPiDigits();});pauseButton.addEventListener('click',()=>{isPaused=!isPaused;pauseButton.textContent=isPaused?'resume':'pause';});stopButton.addEventListener('click',()=>{shouldStop=true;isPaused=false;});</script></body></html>